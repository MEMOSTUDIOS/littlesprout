<!DOCTYPE html>
<html lang="en">
<head>
    <title>Little Sprout: Adventure in Nature</title>
		<meta name="apple-mobile-web-app-title" content="Little Sprout" />
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@500;700&display=swap" rel="stylesheet">
        <style>
        /* 0. BASE STYLES (INCLUDING Z-INDEX FIX) */
        nav {
            z-index: 1000; /* Ensures nav is below popups */
        }
        /* 1. STYLES FOR INTEGRATION */
        #welcome {
            position: relative;
            height: 100vh;
            padding: 0;
            overflow: hidden;
            background-color: #F8F5F2; /* Base background for the new light theme */
        }
        .welcome-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 10;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            background-image: url('https://littlesprout.ro/images/littlesprout-bg.png');
            background-size: cover;
            background-position: center;
            transition: opacity 0.66s ease-out;text-shadow: 0px 2px 6px rgba(0, 0, 0, 0.2);
        }
        .welcome-overlay.fade-out {
            opacity: 0;
            pointer-events: none;
        }
        #integrated-game-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1;
    opacity: 0; /* Hide by default */
    visibility: hidden; /* Hide by default */
    transition: opacity 0.66s ease-in; /* Smooth fade-in effect */
}

/* Add this new class to control visibility */
#integrated-game-container.visible {
    opacity: 1;
    visibility: visible;
}

        /* 2. UPDATED GAME STYLES */
        :root {
            --font-main: 'Nunito', sans-serif;
            /* New Light & Natural Color Palette */
            --color-background: #F8F5F2; /* Warm Off-White */
            --color-primary: #3D553D;     /* Deep Natural Green */
            --color-secondary: #FFFFFF;   /* Clean White */
            --color-accent: #7FAF64;      /* Friendly Leaf Green */
            --glow-color: #FFFFFF;      /* White text on dark surfaces */
            --board-size: min(75vmin, 500px);
            --color-winner-glow: #feca57;
        }
        #integrated-game-container * { box-sizing: border-box; }
        #integrated-game-container {
            color: #222; /* Default dark text for light backgrounds */
        }
        #main-container {
            font-family: var(--font-main);
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }
        #sidebar {
            width: 280px;
            height: 100%;
            padding: 20px;
            display: flex;
            flex-direction: column;
            background: var(--color-primary);
            color: var(--glow-color);
            z-index: 1111;
        }
        #setup-controls { display: flex; flex-direction: column; align-items: center; gap: 20px; flex-grow: 1; }
        #sidebar h2 { font-weight: 700; font-size: 1.8rem; color: var(--glow-color); text-align: center; margin-bottom: 0; }
        #steps-list { list-style: none; padding: 0; width: 100%; text-align: left; counter-reset: steps; margin-bottom: 0; }
        #steps-list li { font-size: 1.1rem; margin-bottom: 10px; color: #ccc; font-weight: 700; transition: all 0.3s ease; }
        #steps-list li::before { counter-increment: steps; content: counter(steps) ". "; color: var(--color-accent); margin-right: 10px; }
        #steps-list li.step-active { color: var(--glow-color); transform: scale(1.05); }
        #interactive-controls-container { min-height: 70px; display: flex; flex-direction: column; justify-content: center; align-items: center; gap: 15px; width: 100%; }
        #dice-container { display: flex; gap: 15px; cursor: pointer; transition: opacity 0.5s, transform 0.3s ease; opacity: 0; pointer-events: none; }
        #dice-container.visible { opacity: 1; pointer-events: auto; }
        #dice-container.selectable { transform: scale(1.05); }
        .dice { width: 45px; height: 45px; background-color: var(--color-secondary); border-radius: 8px; padding: 6px; display: grid; grid-template-columns: repeat(3, 1fr); grid-template-rows: repeat(3, 1fr); box-shadow: 0 2px 5px rgba(0,0,0,0.1); border: 1px solid #ddd; }
        .dot { width: 8px; height: 8px; background-color: var(--color-primary); border-radius: 50%; align-self: center; justify-self: center; }
        .dice[data-value="1"] .dot:nth-child(1){grid-area:2/2}.dice[data-value="2"] .dot:nth-child(1){grid-area:1/1}.dice[data-value="2"] .dot:nth-child(2){grid-area:3/3}.dice[data-value="3"] .dot:nth-child(1){grid-area:1/1}.dice[data-value="3"] .dot:nth-child(2){grid-area:2/2}.dice[data-value="3"] .dot:nth-child(3){grid-area:3/3}.dice[data-value="4"] .dot:nth-child(1){grid-area:1/1}.dice[data-value="4"] .dot:nth-child(2){grid-area:1/3}.dice[data-value="4"] .dot:nth-child(3){grid-area:3/1}.dice[data-value="4"] .dot:nth-child(4){grid-area:3/3}.dice[data-value="5"] .dot:nth-child(1){grid-area:1/1}.dice[data-value="5"] .dot:nth-child(2){grid-area:1/3}.dice[data-value="5"] .dot:nth-child(3){grid-area:2/2}.dice[data-value="5"] .dot:nth-child(4){grid-area:3/1}.dice[data-value="5"] .dot:nth-child(5){grid-area:3/3}.dice[data-value="6"] .dot:nth-child(1),.dice[data-value="6"] .dot:nth-child(2){grid-row:1}.dice[data-value="6"] .dot:nth-child(3),.dice[data-value="6"] .dot:nth-child(4){grid-row:2}.dice[data-value="6"] .dot:nth-child(5),.dice[data-value="6"] .dot:nth-child(6){grid-row:3}.dice[data-value="6"] .dot:nth-child(1),.dice[data-value="6"] .dot:nth-child(3),.dice[data-value="6"] .dot:nth-child(5){grid-column:1}.dice[data-value="6"] .dot:nth-child(2),.dice[data-value="6"] .dot:nth-child(4),.dice[data-value="6"] .dot:nth-child(6){grid-column:3}
        .rolling { animation: subtleRoll 0.5s ease-out; }
        @keyframes subtleRoll { 0% { transform: rotateY(0deg); } 100% { transform: rotateY(360deg); } }
        #color-palette { display: flex; justify-content: center; gap: 0px; transition: opacity 0.5s, transform 0.5s; opacity: 0; transform: scale(0.8); pointer-events: none; }
        #color-palette.visible { opacity: 1; transform: scale(1); pointer-events: auto; }
        .color-swatch { width: 45px; height: 45px; border-radius: 0; border: none; background-color: transparent; cursor: pointer; transition: transform 0.2s; padding: 2px; }
        .color-swatch svg { width: 100%; height: 100%; filter: drop-shadow(0 1px 1px rgba(0,0,0,0.2)); }
        .color-swatch:hover { transform: scale(1.15); }
        #narration-box { width: 100%; margin-top: auto; padding: 15px; text-align: center; }
        #narration-text { font-size: 1rem; line-height: 1.2; color: var(--glow-color); text-shadow: 0 1px 2px rgba(0,0,0,0.3); }
        #game-container { flex: 1; height: 100%; background-image: url(https://littlesprout.ro/images/board-game-little-sprout.png); position: relative; background-position: bottom; background-size: cover; display: flex; justify-content: center; align-items: center; }
        #game-title { position: absolute; top: 20px; left: 50%; transform: translateX(-50%); font-size: clamp(1rem, 4vmin, 2rem); color: var(--color-primary); text-shadow: 0 1px 3px rgba(255,255,255,0.5); z-index: 45; white-space: nowrap; }
        #game-board-wrapper { position: relative; width: var(--board-size); height: var(--board-size); display: flex; justify-content: center; align-items: center; }
        #game-board-frame {
             display: block;
             position: absolute;
            width: calc(var(--board-size) + 40px);
            height: calc(var(--board-size) + 40px);
            background-color: #D2B48C; /* Fallback wood color */
            background-image: url(https://littlesprout.ro/images/board-game-little-sprout.png?q=80&w=2074&auto=format&fit=crop);
            border: 1px solid #D8D3CA; /* Darker wood border */
            border-radius: 15px;
            z-index: 5;
        }
        #game-board { position: relative; width: var(--board-size); height: var(--board-size); border-radius: 50%; border: 2px solid #D8D3CA; background: #EFEBE6; box-shadow: 0 10px 30px rgba(0,0,0,0.1), inset 0 0 15px rgba(0,0,0,0.1); transform: none; transition: width 0.3s ease, height 0.3s ease; z-index: 10; overflow: hidden; }
        #game-board::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-image: url(https://littlesprout.ro/images/little-sprout-bg.png?q=80&w=2074&auto=format&fit=crop); background-size: cover; background-position: center; border-radius: 50%; opacity: 0.55; z-index: -1; }
        #spots-container { position: absolute; top: 50%; left: 50%; width: 1px; height: 1px; }
        .spot { position: absolute; width: 4vmin; height: 4vmin; min-width: 20px; min-height: 20px; max-width: 30px; max-height: 30px; top: calc(-2vmin); left: calc(-2vmin); border-radius: 50%; cursor: pointer; transition: box-shadow 0.3s ease, background-color 0.3s; display: flex; justify-content: center; align-items: center; background-color: #ffffff; color: var(--color-primary); font-size: clamp(0.6rem, 2vmin, 1rem); font-weight: 700; }
        #center-spot { background-color: #ffffff !important; pointer-events: none; }
        .sprout-pawn { position: absolute; top: calc(-1.75vmin); left: calc(-1.75vmin); width: 3.5vmin; height: 3.5vmin; min-width: 16px; min-height: 16px; max-width: 26px; max-height: 26px; border-radius: 50%; border: 3px solid #fff; box-shadow: 0 2px 5px rgba(0,0,0,0.3); z-index: 50; opacity: 0; transform: scale(0); transition: transform 1s cubic-bezier(0.65, 0, 0.35, 1), opacity 0.5s; }
        #opponent-sprout { background-color: #8E44AD; }
        .glowing { animation: pulse-glow 1.5s infinite; }
        @keyframes pulse-glow {
            0% {
                box-shadow: 0 0 5px 2px rgba(127, 175, 100, 0.7), 0 0 15px 5px rgba(127, 175, 100, 0.5);
            }
            50% {
                box-shadow: 0 0 10px 4px rgba(127, 175, 100, 1), 0 0 25px 10px rgba(127, 175, 100, 0.7);
            }
            100% {
                box-shadow: 0 0 5px 2px rgba(127, 175, 100, 0.7), 0 0 15px 5px rgba(127, 175, 100, 0.5);
            }
        }
        .winning-pawn { animation: winning-glow 2.5s ease-in-out; z-index: 100 !important; }
        @keyframes winning-glow { 0% { transform: translate(var(--translateX, 0), var(--translateY, 0)) scale(1.2); box-shadow: 0 0 20px 10px #fff, 0 0 30px 15px var(--color-winner-glow); border-color: var(--color-winner-glow); } 50% { transform: translate(var(--translateX, 0), var(--translateY, 0)) scale(1.5); box-shadow: 0 0 40px 20px #fff, 0 0 50px 25px var(--color-winner-glow); border-color: #fff; } 100% { transform: translate(var(--translateX, 0), var(--translateY, 0)) scale(1.2); box-shadow: 0 0 20px 10px #fff, 0 0 30px 15px var(--color-winner-glow); border-color: var(--color-winner-glow); } }
        .winner-text { position: absolute; left: 0; top: 0; transform: translate(-50%, -150%); font-family: var(--font-main); font-size: 2.5rem; font-weight: 700; color: #DAA520; text-shadow: 0 0 5px white, 0 0 15px #DAA520; z-index: 101; pointer-events: none; white-space: nowrap; animation: fade-in-scale 1s ease-out forwards; }
        @keyframes fade-in-scale { from { opacity: 0; transform: translate(-50%, -150%) scale(0.5); } to { opacity: 1; transform: translate(-50%, -150%) scale(1); } }
        #card-hand { position: absolute; bottom: -250px; left: 50%; transform: translateX(-50%); width: 1100px; display: flex; justify-content: center; transition: bottom 0.5s cubic-bezier(0.65, 0, 0.35, 1); z-index: 5; }
        #card-hand.visible { bottom: -60px; }
        #opponent-card-hand { position: absolute; top: -250px; left: 50%; transform: translateX(-50%); width: 1100px; display: flex; justify-content: center; transition: top 0.5s cubic-bezier(0.65, 0, 0.35, 1), opacity 0.5s; z-index: 5; opacity: 0.3; pointer-events: none; }
        #opponent-card-hand.visible { top: -70px; }
        #opponent-card-hand.active { opacity: 1; }
        .hand-active { z-index: 15; }
        /* === SCOPED GAME CARD STYLES === */
        #card-hand .card, #opponent-card-hand .opponent-card { width: clamp(95px, 12vw, 150px); height: clamp(150px, 18vw, 220px); position: relative; display: flex; flex-direction: column; justify-content: flex-start; padding: clamp(5px, 1vw, 10px); border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); --rotation: 0deg; transform: rotate(var(--rotation)); transition: transform 0.3s ease, opacity 0.3s ease; flex-shrink: 0; }
        #card-hand .card { background-color: var(--color-secondary); border: 2px solid var(--color-accent); }
        #opponent-card-hand .opponent-card { background: var(--color-primary); opacity: 0.8; border: 2px solid var(--color-accent); }
        #card-hand .card:not(:first-child), #opponent-card-hand .opponent-card:not(:first-child) { margin-left: -20px; }
        #card-hand .card:not(.inactive):hover { transform: rotate(var(--rotation)) translateY(-15px); z-index: 10; box-shadow: 0 8px 25px rgba(0,0,0,0.15); }
        #card-hand .card.inactive { opacity: 0.5; transform: rotate(var(--rotation)) scale(0.95); pointer-events: none; }
        #card-hand .card-title { font-size: clamp(0.5rem, 1.2vw, 0.8rem); font-weight: 700; color: var(--color-primary); text-align: center; width: 100%; margin-bottom: 10px; }
        #card-hand .card-actions { width: 100%; display: flex; flex-direction: row; justify-content: space-around; align-items: center; }
        #card-hand .card-image-placeholder { width: 100%; height: clamp(50px, 8vw, 80px); display: flex; align-items: center; justify-content: center; border-radius: 5px; overflow: hidden; background: none; margin-top: 0px; }
        #card-hand .card-image-placeholder img { width: 100%; height: 100%; object-fit: cover; }
        .action-dot { width: clamp(20px, 3vw, 30px); height: clamp(20px, 3vw, 30px); font-size: clamp(0.7rem, 1vw, 0.9rem); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; cursor: pointer; position: relative; pointer-events: none; transition: box-shadow 0.3s, opacity 0.3s; }
        .action-dot.white { background-color: #fff; color: #333; border: 1px solid #ccc; }
        .action-dot.black { background-color: #333; color: #fff; }
        .hand-interactable .action-dot { pointer-events: auto; }
        .action-dot::after { content: attr(data-tooltip); position: absolute; bottom: 125%; left: 50%; transform: translateX(-50%); background-color: #333; color: #fff; padding: 4px 8px; border-radius: 4px; font-size: 0.75rem; white-space: nowrap; opacity: 0; transition: opacity 0.2s; pointer-events: none; }
        .action-dot:hover::after { opacity: 1; }
        .glowing-action { animation: pulse-glow-action 1.5s infinite; }
        @keyframes pulse-glow-action {
            0% {
                box-shadow: 0 0 4px 1px rgba(127, 175, 100, 0.7), 0 0 12px 3px rgba(127, 175, 100, 0.5);
            }
            50% {
                box-shadow: 0 0 8px 3px rgba(127, 175, 100, 1), 0 0 20px 6px rgba(127, 175, 100, 0.7);
            }
            100% {
                box-shadow: 0 0 4px 1px rgba(127, 175, 100, 0.7), 0 0 12px 3px rgba(127, 175, 100, 0.5);
            }
        }
        .floating-text { position: fixed; font-size: 1.5rem; font-weight: bold; color: #ffca28; text-shadow: 0 0 5px black; pointer-events: none; animation: float-up 1s ease-out forwards; z-index: 9999; }
        @keyframes float-up { from { transform: translateY(0); opacity: 1; } to { transform: translateY(-50px); opacity: 0; } }
        /* --- REVEAL & MODAL STYLES (THEME ALIGNED) --- */
        #reveal-section { position: fixed; top:0; left:0; width: 100%; height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; opacity: 0; visibility: hidden; transition: opacity 1s ease, visibility 0s 1s; z-index: 10001; background: rgba(0,0,0,0.7); backdrop-filter: blur(10px); padding: 40px 0; }
        #reveal-section.visible { opacity: 1; visibility: visible; transition-delay: 0s, 0s; }
        #reveal-title { font-weight:700; font-size: 3rem; margin-bottom: 30px; text-shadow: 0 0 20px var(--glow-color); margin-top: 10px; padding-bottom: 20px; text-align: center; color: var(--glow-color); }
        #product-container { display: flex; justify-content: center; align-items: flex-start; gap: 40px; width: 100%; max-width: 900px; margin: 0 auto; padding: 20px 0; }
        .product-box { width: 260px; text-align: center; cursor: pointer; transition: transform 0.3s ease; flex-shrink: 0; padding-bottom: 20px; }
        .product-box:hover { transform: scale(1.05); }
        .product-box img { width: 100%; margin-bottom: 15px; height: 250px; object-fit: cover; border-radius: 8px; }
        .product-box h3 { font-weight: 700; font-size: 1.2rem; color: var(--glow-color); }
        .product-box p { font-size: 0.9rem; color: #ccc; max-width: 220px; margin: 10px auto; }
        .product-box button, #replay-button, .subscribe-form button { font-weight: 700; font-size: 1rem; padding: 12px 24px; border-radius: 50px; border: none; cursor: pointer; transition: all 0.3s ease; text-transform: capitalize; }
        .product-box button, .subscribe-form button { background: var(--color-accent); color: var(--glow-color); box-shadow: 0 4px 15px rgba(127, 175, 100, 0.4); }
        .product-box button:hover, .subscribe-form button:hover { transform: translateY(-3px); box-shadow: 0 6px 20px rgba(127, 175, 100, 0.6); background: #94c379; }
        #replay-button { background: var(--glow-color); color: var(--color-primary); border: 2px solid var(--glow-color); }
        #replay-button:hover { background: #e0e0e0; border-color: #e0e0e0; }
        #reveal-footer { display: flex; justify-content: center; align-items: center; gap: 20px; width: 100%; margin-top: 20px; }
        .subscribe-form { display: flex; gap: 10px; align-items: center; }
        .subscribe-form input { padding: 12px 20px; border-radius: 50px; border: 2px solid var(--color-accent); background-color: rgba(255,255,255,0.1); color: var(--glow-color); font-size: 1rem; }
        .subscribe-form input::placeholder { color: #ccc; }
        #subscription-alert { position: fixed; top: 20px; left: 50%; transform: translateX(-50%); background-color: var(--color-accent); color: white; padding: 12px 24px; border-radius: 50px; box-shadow: 0 5px 15px rgba(0,0,0,0.3); z-index: 10001; display: flex; align-items: center; gap: 10px; opacity: 0; visibility: hidden; transition: opacity 0.5s, transform 0.5s, visibility 0.5s; }
        #subscription-alert.visible { opacity: 1; visibility: visible; transform: translate(-50%, 10px); }
        .modal { position: fixed; inset: 0; z-index: 10001; display: flex; align-items: center; justify-content: center; padding: 1rem; opacity: 0; visibility: hidden; transition: opacity 0.3s ease, visibility 0s 0.3s; }
        .modal.visible { opacity: 1; visibility: visible; transition-delay: 0s, 0s; }
        .modal-overlay { position: absolute; inset: 0; background-color: rgba(0,0,0,0.7); backdrop-filter: blur(5px); }
        .modal-content { position: relative; background-color: var(--color-primary); border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); width: 100%; max-width: 500px; color: #eee; transform: scale(0.95); opacity: 0; transition: transform 0.3s ease, opacity 0.3s ease; }
        .modal.visible .modal-content { transform: scale(1); opacity: 1; }
        .modal-header { display: flex; justify-content: space-between; align-items: center; padding: 1rem 1.5rem; border-bottom: 1px solid rgba(255,255,255,0.1); }
        .modal-header h3 { font-size: 1.5rem; color: var(--glow-color); }
        .modal-close-btn { background: none; border: none; color: #eee; font-size: 1.5rem; cursor: pointer; line-height: 1; }
        .modal-body { padding: 1.5rem; }
        .modal-body .form-group { margin-bottom: 1rem; }
        .modal-body label { display: block; margin-bottom: 0.5rem; font-size: 0.9rem; color: #ccc; }
        .modal-body input, .modal-body textarea { width: 100%; padding: 0.75rem; border-radius: 8px; border: 2px solid var(--color-accent); background-color: rgba(0,0,0,0.2); color: #fff; font-size: 1rem; }
        .modal-body button { width: 100%; font-weight: 700; font-size: 1.1rem; padding: 1rem; border-radius: 8px; border: none; cursor: pointer; transition: all 0.3s ease; background: var(--color-accent); color: var(--glow-color); box-shadow: 0 4px 15px rgba(127, 175, 100, 0.4); }
        .modal-body button:hover { transform: translateY(-3px); box-shadow: 0 6px 20px rgba(127, 175, 100, 0.6); background: #94c379; }
        #confirmation-message { display: none; text-align: center; padding: 2rem; }
        #confirmation-message svg { margin: 0 auto 1rem; }
        /* === EXACT STYLES FOR INFORMATIONAL CARDS === */
        #cards .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }
        #cards .card {
            background-color: #ffffff;
            border: 1px solid #e0e0e0;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            padding: 1rem;
            display: flex;
            flex-direction: column;
            text-align: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        #cards .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        #cards .card h3 {
            color: #333;
            font-size: 1.1rem;
            font-weight: 700;
            margin: 0;
            line-height: 1.4;
            min-height: 45px;
        }
        #cards .card h3 .small {
            display: block;
            font-size: 0.85rem;
            color: #666;
            font-weight: 500;
            margin-top: 2px;
        }
        #cards .card .product-img-card {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 8px;
            margin: 0.75rem 0;
        }
        #cards .card .category {
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-size: 0.9rem;
            color: #555;
            margin: 0 0 1rem 0;
            padding-top: 10px;
            font-weight: 700;
        }
        #cards .card .category .card-category {
            width: 20px;
            height: 20px;
            vertical-align: middle;
            margin-right: 8px;
        }
        #cards .card .category .card-img {
            width: 20px;
            height: 20px;
        }
        #cards .card p:not(.category) {
            font-size: 0.9rem;
            line-height: 1.5;
            color: #555;
            text-align: left;
            margin: 0;
        }
        @media (max-width: 1200px) { #main-container { flex-direction: column; position: relative; } #sidebar { width: 100%; height: auto; min-height: 110px; max-height: 110px; flex-shrink: 0; flex-direction: column; border-right: none; border-bottom: 1px solid rgba(255, 255, 255, 0.1); padding: 10px; z-index: 500; background: rgba(61, 85, 61, 0.9); backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); box-shadow: 0 4px 15px rgba(0,0,0,0.3); } #sidebar h2, #steps-list { display: none; } #setup-controls { flex-direction: column; gap: 15px; width: 100%; } #narration-box { margin-top: 0px; width: 100%; order: -1; padding: 25px 0px 5px; } #interactive-controls-container { min-height: auto; } #game-container { width: 100%; } #game-title { display: none; } #card-hand, #opponent-card-hand { max-width: 90vw; } #card-hand .card:not(:first-child), #opponent-card-hand .opponent-card:not(:first-child) { margin-left: -15px; } }
        @media (max-width: 768px) { #card-hand .card:not(:first-child), #opponent-card-hand .opponent-card:not(:first-child) { margin-left: -10px; } #reveal-section { overflow-y: auto; -webkit-overflow-scrolling: touch; padding: 120px 20px; display: block; height: 100%; box-sizing: border-box; justify-content: flex-start; } #reveal-title { font-size: 2rem; margin-top: 0; margin-bottom: 40px; padding-bottom: 0; text-align: center; } #product-container { display: flex; flex-direction: column; align-items: center; gap: 30px; padding: 0; margin: 0; overflow: visible; } .product-box { width: 100%; max-width: 350px; padding-bottom: 0; scroll-snap-align: none; } .product-expansion, .product-collector { display: none; } #reveal-footer { width: 100%; display: flex; flex-direction: column; align-items: center; gap: 20px; margin-top: 50px; padding: 0; } #replay-button { position: static; transform: none; width: 100%; max-width: 350px; } .subscribe-form { display: flex; flex-direction: column; gap: 15px; align-items: center; width: 100%; max-width: 350px; padding: 20px; border-radius: 15px; background: rgba(0, 0, 0, 0.1); } .subscribe-form input, .subscribe-form button { width: 100%; } }
    </style>
</head>
<body>
    <nav>
        <div class="nav-container">
            <a href="#welcome" class="logo" title="Logo Little Sprout">
                <img src="images/logo-little-sprout.png" alt="icon"><span>Little Sprout</span>
            </a>
            <ul>
                <li><a href="#welcome" class="active">Welcome</a></li>
                <li><a href="#game">Game</a></li>
                <li><a href="#rules">Rules</a></li>
                <li><a href="#cards">Cards</a></li>
                <li><a href="#shop">Shop</a></li>
            </ul>
        </div>
    </nav>
        <section id="welcome">
        <div id="integrated-game-container">
            <div id="main-container">
                <div id="sidebar">
                    <div id="setup-controls">
                        <h2>Start Your Adventure</h2>
                        <ol id="steps-list">
                            <li id="step-1">Choose Your Color</li>
                            <li id="step-2">Roll the Dice</li>
                            <li id="step-3">Place Your Sprout</li>
                        </ol>
                        <div id="interactive-controls-container">
                            <div id="color-palette"></div>
                            <div id="dice-container">
                                <div class="dice" data-value="1"><div class="dot"></div></div>
                                <div class="dice" data-value="1"><div class="dot"></div></div>
                            </div>
                        </div>
                    </div>
                    <div id="narration-box"><p id="narration-text"></p></div>
                </div>
                <div id="game-container">
                    <h1 id="game-title">Little Sprout: Adventure in Nature</h1>
                    <div id="game-board-wrapper">
                        <div id="game-board-frame"></div>
                        <div id="game-board">
                            <div id="spots-container"></div>
                        </div>
                    </div>
                    <div id="opponent-card-hand"></div>
                    <div id="card-hand"></div>
                    <div id="reveal-section">
                        <h1 id="reveal-title">Play the Adventure Home</h1>
                        <div id="product-container">
                             <div class="product-box"><img src="https://littlesprout.ro/images/standard.jpg" alt="Standard Edition Box Art"><h3>Standard Edition</h3><p>The complete core experience. Everything you need to begin.</p><button class="preorder-btn">Pre-order Now</button></div>
                             <div class="product-box product-expansion"><img src="https://littlesprout.ro/images/expansion.jpg" alt="Expansion Box Art"><h3>Game Expansion</h3><p>New characters, and greater challenges.</p><button class="preorder-btn">Pre-order Now</button></div>
                             <div class="product-box product-collector"><img src="https://littlesprout.ro/images/collector-edition.jpg" alt="Collector's Edition Box Art"><h3>Collector's Edition</h3><p>The ultimate treasure, with exclusive content.</p><button class="preorder-btn">Pre-order Now</button></div>
                        </div>
                        <div id="reveal-footer">
                                <button id="replay-button">Replay demo</button>
                                <form class="subscribe-form" onsubmit="game.handleSubscription(event)">
                                      <input type="email" id="subscribe-email" placeholder="Enter your email for news...">
                                      <button type="submit">Subscribe</button>
                                </form>
                        </div>
                    </div>
                </div>
            </div>
            <div id="subscription-alert"><span>Thank you for subscribing!</span></div>
            <div id="preorder-modal" class="modal">
                <div class="modal-overlay"></div>
                <div class="modal-content">
                    <div id="preorder-form-container">
                        <div class="modal-header"><h3>Pre-order Little Sprout</h3><button class="modal-close-btn">&times;</button></div>
                        <form id="preorder-form" class="modal-body">
                            <div class="form-group"><label for="name">Full Name</label><input type="text" id="name" placeholder="Elara Vance" required></div>
                            <div class="form-group"><label for="email">Email Address</label><input type="email" id="email" placeholder="elara.vance@example.com" required></div>
                            <div class="form-group"><label for="address">Shipping Address</label><textarea id="address" rows="3" placeholder="123 Mystic Lane, Spellbound City" required></textarea></div>
                            <p style="font-size: 0.8rem; text-align: center; opacity: 0.7; margin-bottom: 1rem;">Note: This is a demo. No payment will be processed.</p>
                            <button type="submit">Confirm Pre-order ($49.99)</button>
                        </form>
                    </div>
                    <div id="confirmation-message">
                        <svg width="64" height="64" viewBox="0 0 24" fill="none" stroke="var(--color-accent)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>
                        <h3 style="font-size: 1.8rem; color: var(--glow-color); margin-bottom: 0.5rem;">Pre-order Confirmed!</h3>
                        <p>Thank you! A confirmation has been sent to your email. We'll notify you when your adventure ships.</p>
                        <button id="close-confirmation-btn" style="background: var(--color-accent); color: white; padding: 10px 20px; border-radius: 5px; margin-top: 1.5rem; border: none; cursor: pointer;">Close</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="welcome-overlay">
            <h3 class="mt-5">Little Sprout</h3>
            <h1>Adventure in Nature</h1>
            <a class="cta-button" href="#game">Start Your Journey</a>
        </div>
    </section>
     <section id="game">
        <h2 class="mt-5">The Game</h2><h3>Welcome you to the magical land of Romania, where nature is waiting for you in its most spectacular forms!</h3><p>In the heart of enchanted forests, sparkling rivers, and vibrant meadows, a small sprout named Little Sprout is about to embark on a great adventure, and you're invited to join in.<br/>Guided by the whispers of nature, Little Sprout wants to learn about the most famous animals, insects, flowers, fish, birds, and butterflies of Romania.</p><p>Each turn brings you a new discovery as you draw cards featuring Romania's most incredible natural wonders.</p><div class="game-features mt-5">
            <div class="product-img feature"><h3 class="game-dot1">+1</h3>
                <h1>Drawing</h1>
                <p>Bring nature to life through your art</p><p><br/>Sometimes you will become an artist, sketching beautiful creatures for your friends to guess.</p>
            </div>
            <div class="product-img feature"><h3 class="game-dot2">+2</h3>
                <h1>Memorizing</h1>
                <p>Share two fascinating facts you have learned about Romania's wildlife</p><p><br/>Other times, you will put on your thinking cap to remember interesting facts about the plants and animals you have met along the way.</p>
            </div>
            <div class="product-img feature"><h3 class="game-dot1">+1</h3>
                <h1>Interpretation</h1>
                <p>Describe the wonders of nature in your own words</p><p><br/>And when you are feeling clever, you can describe these amazing creatures using only your words—as if you are telling a magical story about nature!</p>
            </div>
        </div><p class="mt-5">Every time you complete these fun challenges, you will earn special points that help your own tree of knowledge grow taller and stronger.</p><p>The more you play, the more you learn, and the more your tree blooms—just like Little Sprout!</p><p><br/>This heartwarming adventure will help your mind flourish in so many ways:<br/>🌱 Your imagination will soar as you create artwork and tell stories<br/>🌱 Your memory will grow stronger as you learn fascinating facts about nature<br/>🌱 Your friendships will bloom as you work together with other players<br/>🌱 Your love for nature will deepen as you discover Romania's amazing wildlife</p>
    </section>
    <section id="rules">
        <div class="rules-container">
            <h2 class="mt-5">How to Play</h2>
            <div class="rules-content">
                <h3>Game setup: 2-10 players</h3>
<p>1. First, choose your pawn.</p>
                <p>2. You will start with 6 cards from the pack.</p><p>3. Roll the dice and place your pawn on the number you get.</p>  <p>4. Choose an option and play a card: you can draw, memorize, or interpret.</p><p>5. You will advance 1 or 2 points if someone guesses correctly.</p><p>6. The player who guessed right also moves forward 1 point.</p><p>7. The card you played goes back in the deck to be shuffled.</p><p>8. You will draw a new card at the end of your turn.</p><p>9. You will play the color option you landed on.</p>

                <h3>Gameplay</h3>
                <p>You and the other players will take turns playing cards to build your knowledge tree.</p><p>Choose one of these options to play:</p><p>1. Drawing (+1 point)</p><p>2. Memorizing 2 facts (+2 points)</p><p>3. Interpretation (+1 point)</p><p>The first player to guess correctly wins 1 point.</p>
                <h3>Winning</h3>
                <p>The first player to reach the "Little Sprout" level wins! But wait, there is more!</p><p>After you reach the "Little Sprout" level, you can keep playing from the beginning or team up with other players. You can form teams with a maximum of 2-3 players.</p>
            </div>
        </div>
    </section>
    <section id="cards">
        <h2 class="mt-5">Cards</h2>
        <div class="search-filter">
            <input type="text" id="cardSearch" placeholder="Search for a card...">
        </div>
        <div class="cards-grid" id="cardsGrid">
            </div><p class="mt-3"><strong>Note:</strong> The facts on the actual cards might be different.</p>
    </section>
    <section id="shop">
    <h2 class="mt-5">Shop</h2>
    <div class="products-grid">
        <div class="product product-img2"><img
        class="product-img"
        src="images/standard.jpg"
        alt="Family Adventure Set"
      >
            <h3>Family Adventure Set</h3>
            <p>Kick off your game night with a magical journey that is simple for you to learn and fun to play.</p>
            <p class="game-content">
                🌱 <strong>Story & Rules:</strong> I’ve included an engaging tale and easy-to-follow rules to spark your imagination.<br/>
                🌱 <strong>72 Discovery Cards:</strong> You'll uncover surprises and challenges on every turn.<br/>
                🌱 <strong>4 Seasonal Cards:</strong> Watch the game evolve with fun seasonal twists.<br/>
                🌱 <strong>Illustrated Game Board:</strong> A vibrant, detailed board that will transport you to a magical world.<br/>
                🌱 <strong>10 Colored Pawns & 2 Dice:</strong> You get all the classic components for a perfect start.<br/><br/>
                <strong>This is perfect for:</strong> Creating a cozy, interactive game night that brings your whole family together!
            </p>
            <button>COMING SOON</button>
        </div>
        <div class="product product-img2"><img
        class="product-img"
        src="images/expansion.jpg"
        alt="Family Adventure Set"
      >
            <h3>Extra Challenge Pack</h3>
            <p>If you crave an extra dose of adventure and creativity—this pack adds exciting layers to your game.</p>
            <p>(Note: You will need the Family Adventure Set for this.)</p>
            <p class="game-content">
                🌿 <strong>Expansion Story & New Rules:</strong> You can dive deeper into the adventure with fresh twists.<br/>
                🌿 <strong>54 Additional Discovery Cards:</strong> More challenges to keep every game session exciting for you.<br/>
                🌿 <strong>4 Extra Seasonal Cards:</strong> Additional surprises that change the game’s mood.<br/>
                🌿 <strong>Enhanced Game Board Elements:</strong> Extra details that boost the visual storytelling for you.<br/><br/>
                <strong>Here's a tip:</strong> You can bundle this with the Family Adventure Set to unlock an even richer gaming experience!
            </p>
            <button>COMING SOON</button>
        </div>
        <div class="product product-img2 full-width"><img
        class="product-img"
        src="images/collector-edition.jpg"
        alt="Family Adventure Set"
      >
            <h3>Family Adventure Bundle (Collector’s Edition)</h3>
            <p>This is the ultimate package for a truly immersive game night! You can enjoy the complete adventure—combining the Family Adventure Set and the Extra Challenge Pack—plus I've included exclusive creative extras that make every moment special.</p>
            <p class="game-content">
                🌱 <strong>Complete Story & Rules:</strong> You will enjoy the full narrative and easy-to-grasp rules that guide your adventure.<br/>
                🌱 <strong>Total Discovery Cards:</strong> You get a whopping 126 cards (72 standard + 54 expansion) to spark endless fun.<br/>
                🌱 <strong>All Seasonal Cards:</strong> 8 cards in total (4 standard + 4 extra) for dynamic, ever-changing gameplay.<br/>
                🌱 <strong>Illustrated Game Board:</strong> An artfully designed board that will draw you and your family into the adventure.<br/>
                🌱 <strong>Family Tokens:</strong> 10 colored pawns and 2 dice to make every turn exciting for you.<br/>
                <br/><strong>Creative Extras I have included for you:</strong><br/>
                🌿 <strong>Art Supplies:</strong> Colored pencils, a multi-functional pencil (with an eraser & sharpener), and an A5 notebook—perfect for you to doodle or keep score!<br/>
                🌿 <strong>Bonus Treat:</strong> A charming Little Sprout sticker to remind you of nature’s magic.<br/>
                <br/><strong>Why You'll Love It:</strong><br/>
                🍀 <strong>Family Bonding:</strong> I designed it to be enjoyed by everyone, making it ideal for a memorable family game night.<br/>
                🍀 <strong>Screen-Free Fun:</strong> It encourages your creativity, teamwork, and storytelling away from screens.<br/>
                🍀 <strong>Easy to Learn:</strong> The simple rules mean you can jump right into the fun.<br/>
                🍀 <strong>Endless Replayability:</strong> With over 120 cards and changing seasonal surprises, every game will feel brand new to you.<br/>
                <br/><strong>I hope you enjoy countless magical moments together!</strong>
            </p>
            <button>COMING SOON</button>
        </div>
    </div></section>
    <footer><div class="language-switcher">
    <a href="index.html" id="ro-link" title="Romanian">RO</a>
    <span class="divider">|</span>
    <a href="en.html" id="en-link" class="active2" title="English">EN</a></div>
        <p>&copy; Little Sprout. All rights reserved.</p>
        <div class="footer-links">
            <a href="index.html">Home</a> |
            <a href="terms-of-service.html">Terms of Service</a> |
            <a href="/cdn-cgi/l/email-protection#c1adb4a2a8a0afefaca0afa6b481a6aca0a8adefa2aeac">Contact</a>
        </div>
    </footer>
    <script>
        const game = {
            elements: {}, state: {}, spotCoordinates: [],
            config: {
                SPOTS_PER_RING: 11,
                PAWN_COLORS: ['#ff6b6b', '#48dbfb', '#1dd1a1', '#feca57', '#ff9f43'],
                CARD_TITLES: ["Woodpecker", "Praying Mantis", "Zander", "Brown Bear", "Romanian Peony", "Clouded Yellow"],
                CARD_IMAGES: [
                    "https://littlesprout.ro/images/card-black-woodpecker.png",
                    "https://littlesprout.ro/images/card-praying-mantis.png",
                    "https://littlesprout.ro/images/card-zander.png",
                    "https://littlesprout.ro/images/card-bear.png",
                    "https://littlesprout.ro/images/card-romanian-peony.png",
                    "https://littlesprout.ro/images/card-clouded-yellow.png"
                ],
                OUTER_RING_COLORS: ['#f7a732','#f0c340','#92c045','#55b64c','#29b9e6','#2b77c8','#4a4aa8','#684196','#9e2a8f','#e53935','#d82b45']
            },
            tutorialSteps: [
                { text: "First, pick a color for your very own pawn.", action: 'promptColor', stepNumber: 1 },
                { text: "Roll the dice to find your starting spot.", action: 'promptDiceRoll', stepNumber: 2 },
                { text: () => `Click the glowing ${game.state.diceSum} to pop up!`, action: 'promptPlacePawn', stepNumber: 3 },
                { text: "Choose an action from any card in your hand.", action: 'promptPlayerTurn' },
                { text: "Well done! Now it is your friend's turn...", action: 'opponentTurn' },
                { text: "Good. It is your turn again!", action: 'promptPlayerTurn' },
                { text: "You made it to the heart of the forest!", action: 'endGameSuccess' }
            ],
            init() { this.cacheElements(); this.createDynamicElements(); this.createBoardLayout(); this.createColorPalette(); this.attachEventListeners(); this.resetGame(true); },
            cacheElements() {
                const requiredIds = ['sidebar','narration-text','reveal-section','replay-button','spots-container','dice-container','color-palette','card-hand','opponent-card-hand','game-container','steps-list','game-board', 'game-title', 'product-container', 'subscribe-email', 'subscription-alert', 'preorder-modal', 'interactive-controls-container'];
                requiredIds.forEach(id => {
                     const element = document.getElementById(id);
                    if (!element) console.error(`Critical element not found: #${id}`);
                     this.elements[id.replace(/-(\w)/g, (m, l) => l.toUpperCase())] = element;
                 });
                this.elements.dice = this.elements.diceContainer.querySelectorAll('.dice');
                this.elements.preorderModal.overlay = this.elements.preorderModal.querySelector('.modal-overlay');
                this.elements.preorderModal.closeBtn = this.elements.preorderModal.querySelector('.modal-close-btn');
                this.elements.preorderModal.form = this.elements.preorderModal.querySelector('#preorder-form');
                this.elements.preorderModal.formContainer = this.elements.preorderModal.querySelector('#preorder-form-container');
                this.elements.preorderModal.confirmationMsg = this.elements.preorderModal.querySelector('#confirmation-message');
                this.elements.preorderModal.closeConfirmationBtn = this.elements.preorderModal.querySelector('#close-confirmation-btn');
            },
            createDynamicElements() {
                this.elements.playerSprout = this.createPawn('player-sprout');
                this.elements.opponentSprout = this.createPawn('opponent-sprout');
                this.elements.opponentSprout.style.backgroundColor = '#8E44AD';
                const isMobile = window.innerWidth <= 768;
                const cardCount = isMobile ? 5 : 6;
                const rotationMultiplier = isMobile ? 4 : 5;
                const centerIndex = (cardCount - 1) / 2;
                const playerCardFragment = document.createDocumentFragment();
                this.elements.cardHand.innerHTML = '';
                for(let i = 0; i < cardCount; i++) {
                    const card = document.createElement('div');
                    card.className = 'card';
                    const rotation = (i - centerIndex) * rotationMultiplier;
                    card.style.setProperty('--rotation', `${rotation}deg`);
                    card.innerHTML = `<p class="card-title">${this.config.CARD_TITLES[i] || 'New Card'}</p><div class="card-actions"><div class="action-dot white" data-move="1" data-tooltip="Draw +1">+1</div><div class="action-dot black" data-move="2" data-tooltip="Memorize +2">+2</div><div class="action-dot white" data-move="1" data-tooltip="Interpret +1">+1</div></div><div class="card-image-placeholder"><img src="${this.config.CARD_IMAGES[i]}" alt="${this.config.CARD_TITLES[i]}"></div>`;
                    playerCardFragment.appendChild(card);
                }
                this.elements.cardHand.appendChild(playerCardFragment);
                const opponentCardFragment = document.createDocumentFragment();
                this.elements.opponentCardHand.innerHTML = '';
                for(let i = 0; i < cardCount; i++) {
                    const card = document.createElement('div');
                    card.className = 'opponent-card';
                    const rotation = (i - centerIndex) * -rotationMultiplier;
                    card.style.setProperty('--rotation', `${rotation}deg`);
                    opponentCardFragment.appendChild(card);
                }
                this.elements.opponentCardHand.appendChild(opponentCardFragment);
            },
            createPawn(id) { const pawn = document.createElement('div'); pawn.id = id; pawn.className = 'sprout-pawn'; return pawn; },
            createBoardLayout() {
                this.elements.spotsContainer.innerHTML = ''; this.spotCoordinates = []; let spotCounter = 0;
                const rings = [ { numSpots: this.config.SPOTS_PER_RING, radius: 0.46 }, { numSpots: this.config.SPOTS_PER_RING, radius: 0.37 },{ numSpots: this.config.SPOTS_PER_RING, radius: 0.28 }, { numSpots: this.config.SPOTS_PER_RING, radius: 0.19 },{ numSpots: this.config.SPOTS_PER_RING, radius: 0.09 },{ numSpots: 1, radius: 0 } ];
                const boardWidth = this.elements.gameBoard.getBoundingClientRect().width;
                if (boardWidth === 0) { requestAnimationFrame(() => this.createBoardLayout()); return; }
                rings.forEach((ring, ringIndex) => {
                    for (let i = 0; i < ring.numSpots; i++) {
                        const angle = (i / ring.numSpots) * 2 * Math.PI - (Math.PI / 2);
                        const x = Math.cos(angle) * ring.radius * boardWidth;
                        const y = Math.sin(angle) * ring.radius * boardWidth;
                        this.spotCoordinates.push({ x, y });
                        const spot = document.createElement('div');
                        spot.className = 'spot'; spot.id = `spot-${spotCounter}`; spot.style.zIndex = rings.length - ringIndex;
                        if (ring.radius === 0) { spot.id = 'center-spot';
                        } else if (ringIndex === 0) { spot.innerHTML = `<span>${i + 2}</span>`; spot.addEventListener('click', () => this.handleSpotClick(i));
                        } else if (ringIndex === 1 || ringIndex === 3) { spot.style.backgroundColor = '#BDB7AB'; spot.style.border = '1px solid #aaa'; }
                        spot.style.transform = `translate(${x}px, ${y}px)`;
                        this.elements.spotsContainer.appendChild(spot);
                        spotCounter++;
                    }
                });
                this.elements.spotsContainer.appendChild(this.elements.playerSprout);
                this.elements.spotsContainer.appendChild(this.elements.opponentSprout);
                if (this.state && this.state.playerPawnPosition > -1) { const playerPos = this.spotCoordinates[this.state.playerPawnPosition]; this.elements.playerSprout.style.transform = `translate(${playerPos.x}px, ${playerPos.y}px) scale(1)`; }
                if (this.state && this.state.opponentPawnPosition > -1) { const opponentPos = this.spotCoordinates[this.state.opponentPawnPosition]; this.elements.opponentSprout.style.transform = `translate(${opponentPos.x}px, ${opponentPos.y}px) scale(1)`; }
            },
            createColorPalette() {
                this.elements.colorPalette.innerHTML = '';
                this.config.PAWN_COLORS.forEach(color => {
                    const swatch = document.createElement('div');
                    swatch.className = 'color-swatch';
                    swatch.innerHTML = `<svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M16,4 C12.69,4 10,6.69,10,10 C10,13.31 12.69,16 16,16 C19.31,16 22,13.31 22,10 C22,6.69 19.31,4 16,4 Z M16,17 C13,17 11,19 11,22 L21,22 C21,19 19,17 16,17 Z M9,23 L23,23 L23,26 L9,26 Z M7,27 L25,27 L25,29 L7,29 Z" fill="${color}" stroke="#FFFFFF" stroke-width="1.5" stroke-linejoin="round"/></svg>`;
                    swatch.addEventListener('click', () => this.handleColorChoice(color));
                    this.elements.colorPalette.appendChild(swatch);
                });
            },
            attachEventListeners() {
                this.elements.replayButton.addEventListener('click', () => this.resetGame());
                this.elements.cardHand.querySelectorAll('.action-dot').forEach(btn => { btn.addEventListener('click', (e) => { e.stopPropagation(); this.handleActionChoice(parseInt(btn.dataset.move), e.target); }); });
                this.elements.preorderModal.overlay.addEventListener('click', () => this.closePreorderModal());
                this.elements.preorderModal.closeBtn.addEventListener('click', () => this.closePreorderModal());
                this.elements.preorderModal.closeConfirmationBtn.addEventListener('click', () => this.closePreorderModal());
                this.elements.preorderModal.form.addEventListener('submit', (e) => { e.preventDefault(); this.elements.preorderModal.formContainer.style.display = 'none'; this.elements.preorderModal.confirmationMsg.style.display = 'block'; });
                window.addEventListener('resize', () => this.createBoardLayout());
            },
            nextStep() { this.state.currentStep++; if (this.state.currentStep < this.tutorialSteps.length) { const step = this.tutorialSteps[this.state.currentStep]; if (step) { this.elements.narrationText.textContent = typeof step.text === 'function' ? step.text() : step.text; this.updateStepsUI(step.stepNumber); this[step.action](); } } },
            resetGame(isInitialStart = false) {
                if (!isInitialStart) { this.elements.gameBoard.classList.remove('reveal'); this.elements.revealSection.classList.remove('visible'); }
                this.state = { currentStep: -1, diceSum: 0, playerPawnPosition: -1, opponentPawnPosition: -1, selectedPawnColor: this.config.PAWN_COLORS[0], turn: 1, reachedCenter: false, forceMemorize: false };
                this.elements.playerSprout.style.backgroundColor = this.state.selectedPawnColor;
                [this.elements.playerSprout, this.elements.opponentSprout].forEach(pawn => { pawn.style.transition = 'opacity 0s, transform 0s'; pawn.style.opacity = '0'; pawn.style.transform = `scale(0)`; });
                this.elements.playerSprout.classList.remove('winning-pawn');
                const existingWinnerText = this.elements.spotsContainer.querySelector('.winner-text');
                if (existingWinnerText) existingWinnerText.remove();
                document.querySelectorAll('.spot.glowing').forEach(el => el.classList.remove('glowing'));
                this.elements.cardHand.classList.remove('visible'); this.elements.opponentCardHand.classList.remove('visible');
                this.setHandInteractable(false);
                this.elements.dice.forEach(d => this.updateDieFace(d, 1));
                this.elements.cardHand.classList.remove('hand-active'); this.elements.colorPalette.classList.remove('visible'); this.elements.diceContainer.classList.remove('visible');
                if (window.innerWidth <= 1200) { this.elements.colorPalette.style.display = 'none'; this.elements.diceContainer.style.display = 'none'; }
                setTimeout(() => { this.elements.cardHand.classList.add('visible'); this.elements.opponentCardHand.classList.add('visible'); this.nextStep(); }, isInitialStart ? 500 : 750); // Speed up replay animation
            },
            updateStepsUI(stepNumber) { this.elements.stepsList.querySelectorAll('li').forEach((step, index) => { step.classList.toggle('step-active', index + 1 === stepNumber); }); },
            promptColor() { this.updateStepsUI(1); this.elements.diceContainer.classList.remove('visible'); this.elements.colorPalette.classList.add('visible'); if (window.innerWidth <= 1200) { this.elements.diceContainer.style.display = 'none'; this.elements.colorPalette.style.display = 'flex'; } },
            promptDiceRoll() { this.updateStepsUI(2); this.elements.colorPalette.classList.remove('visible'); this.elements.diceContainer.classList.add('visible', 'selectable'); if (window.innerWidth <= 1200) { this.elements.colorPalette.style.display = 'none'; this.elements.diceContainer.style.display = 'flex'; } this.elements.diceContainer.addEventListener('click', () => this.handleDiceRoll(), { once: true }); },
            promptPlacePawn() { this.updateStepsUI(3); document.getElementById(`spot-${this.state.diceSum - 2}`).classList.add('glowing'); },
            promptPlayerTurn() {
                this.updateStepsUI(0); this.elements.cardHand.classList.add('hand-active'); this.elements.opponentCardHand.classList.add('active'); document.querySelectorAll('.glowing-action').forEach(el => el.classList.remove('glowing-action'));
                if (this.state.forceMemorize) { this.elements.narrationText.textContent = "'Memorize' (+2) to advance."; this.setHandInteractable(true); this.elements.cardHand.querySelectorAll('.action-dot').forEach(action => { if (action.dataset.move === '2') { action.classList.add('glowing-action'); action.style.pointerEvents = 'auto'; action.style.opacity = '1'; } else { action.style.pointerEvents = 'none'; action.style.opacity = '0.4'; } });
                } else { this.elements.narrationText.textContent = "Choose an action from your hand."; this.setHandInteractable(true); const thirdCardAction = this.elements.cardHand.querySelectorAll('.card')[2].querySelector('.action-dot'); if(thirdCardAction) thirdCardAction.classList.add('glowing-action'); }
            },
            opponentTurn() { this.handleOpponentTurn(); },
            endGameSuccess() {
                this.elements.playerSprout.classList.add('winning-pawn'); const winnerText = document.createElement('div'); winnerText.textContent = 'Winner'; winnerText.className = 'winner-text'; this.elements.spotsContainer.appendChild(winnerText);
                setTimeout(() => { this.reveal(); this.elements.playerSprout.classList.remove('winning-pawn'); winnerText.remove(); }, 2500);
            },
            handleColorChoice(color) { this.state.selectedPawnColor = color; this.elements.playerSprout.style.backgroundColor = color; this.elements.colorPalette.classList.remove('visible'); if (window.innerWidth <= 1200) { setTimeout(() => { this.elements.colorPalette.style.display = 'none'; }, 500); } this.nextStep(); },
            handleDiceRoll() { this.elements.diceContainer.classList.remove('selectable'); let rollCount = 0; const rollInterval = setInterval(() => { rollCount++; this.elements.dice.forEach(d => { d.classList.add('rolling'); const randomValue = Math.ceil(Math.random() * 6); this.updateDieFace(d, randomValue); }); if (rollCount > 5) { clearInterval(rollInterval); const val1 = Math.ceil(Math.random() * 6), val2 = Math.ceil(Math.random() * 6); this.updateDieFace(this.elements.dice[0], val1); this.updateDieFace(this.elements.dice[1], val2); this.state.diceSum = val1 + val2; this.elements.dice.forEach(d => d.classList.remove('rolling')); setTimeout(() => this.nextStep(), 500); } }, 100); },
            handleSpotClick(index) {
                if (this.state.currentStep !== 2 || index !== this.state.diceSum - 2) return;
                this.elements.diceContainer.classList.remove('visible'); if (window.innerWidth <= 1200) { setTimeout(() => { this.elements.diceContainer.style.display = 'none'; }, 500); }
                document.getElementById(`spot-${index}`).classList.remove('glowing'); this.updateStepsUI(0); this.elements.playerSprout.style.transition = 'opacity 0.5s'; const pos = this.spotCoordinates[index]; this.elements.playerSprout.style.transform = `translate(${pos.x}px, ${pos.y}px) scale(1)`;
                requestAnimationFrame(() => { this.elements.playerSprout.style.opacity = '1'; setTimeout(() => { this.elements.playerSprout.style.transition = 'transform 1s cubic-bezier(0.65, 0, 0.35, 1), opacity 0.5s'; this.placeOpponentPawn(index); this.nextStep(); }, 500); });
                this.state.playerPawnPosition = index;
            },
            placeOpponentPawn(playerStartIndex) { const opponentStartIndex = (playerStartIndex + 4) % this.config.SPOTS_PER_RING; this.state.opponentPawnPosition = opponentStartIndex; const pos = this.spotCoordinates[opponentStartIndex]; this.elements.opponentSprout.style.transition = 'opacity 0.5s'; this.elements.opponentSprout.style.transform = `translate(${pos.x}px, ${pos.y}px) scale(1)`; requestAnimationFrame(() => { this.elements.opponentSprout.style.opacity = '1'; setTimeout(() => { this.elements.opponentSprout.style.transition = 'transform 1s cubic-bezier(0.65, 0, 0.35, 1), opacity 0.5s'; }, 500); }); },
            handleActionChoice(moveAmount, clickedElement) {
                this.setHandInteractable(false); this.showGamificationText(`+${moveAmount}`, clickedElement); this.elements.cardHand.classList.remove('hand-active');
                let newSpotIndex = this.state.playerPawnPosition + (this.config.SPOTS_PER_RING * moveAmount); const centerSpotIndex = this.spotCoordinates.length - 1; if (newSpotIndex >= centerSpotIndex) { newSpotIndex = centerSpotIndex; this.state.reachedCenter = true; }
                if (newSpotIndex !== this.state.playerPawnPosition) { const pos = this.spotCoordinates[newSpotIndex]; this.elements.playerSprout.style.transform = `translate(${pos.x}px, ${pos.y}px) scale(1)`; this.state.playerPawnPosition = newSpotIndex; }
                if (this.state.forceMemorize && moveAmount === 2) { this.state.forceMemorize = false; }
                const ringIndex = Math.floor(this.state.playerPawnPosition / this.config.SPOTS_PER_RING); if (ringIndex === 1 || ringIndex === 3) { this.state.forceMemorize = true; }
                let nextFlowStep = this.state.reachedCenter ? 'endGameSuccess' : 'opponentTurn'; this.state.currentStep = this.tutorialSteps.findIndex(s => s.action === nextFlowStep) - 1; setTimeout(() => this.nextStep(), 1500);
            },
            handleOpponentTurn() { setTimeout(() => { const currentRingIndex = Math.floor(this.state.opponentPawnPosition / this.config.SPOTS_PER_RING); const moveRings = (currentRingIndex === 1 || currentRingIndex === 3) ? 2 : 1; const moveDistance = this.config.SPOTS_PER_RING * moveRings; const newPosIndex = this.state.opponentPawnPosition + moveDistance; if (newPosIndex < this.spotCoordinates.length - 1) { const newPos = this.spotCoordinates[newPosIndex]; this.elements.opponentSprout.style.transform = `translate(${newPos.x}px, ${newPos.y}px) scale(1)`; this.state.opponentPawnPosition = newPosIndex; } setTimeout(() => this.nextStep(), 1500); }, 1000); },
            showGamificationText(text, targetElement) { const rect = targetElement.getBoundingClientRect(); const el = document.createElement('div'); el.textContent = text; el.className = 'floating-text'; el.style.left = `${rect.left + rect.width / 2}px`; el.style.top = `${rect.top}px`; el.style.transform = 'translateX(-50%)'; document.body.appendChild(el); el.addEventListener('animationend', () => el.remove()); },
            reveal() { this.elements.gameBoard.classList.add('reveal'); this.elements.revealSection.classList.add('visible'); const finalNarrationIndex = this.tutorialSteps.findIndex(s => s.action === 'endGameSuccess'); this.elements.narrationText.textContent = this.tutorialSteps[finalNarrationIndex].text; },
            updateDieFace(dieElement, value) { dieElement.dataset.value = value; let dots = ''; for (let i = 0; i < value; i++) dots += '<div class="dot"></div>'; dieElement.innerHTML = dots; },
            setHandInteractable(isInteractable) { if (isInteractable) { this.elements.cardHand.querySelectorAll('.action-dot').forEach(action => { action.style.pointerEvents = ''; action.style.opacity = ''; }); } this.elements.cardHand.classList.toggle('hand-interactable', isInteractable); this.elements.cardHand.querySelectorAll('.card').forEach(card => { card.classList.toggle('inactive', !isInteractable); }); },
            handleSubscription(event) { event.preventDefault(); const emailInput = this.elements.subscribeEmail; if (emailInput.value && emailInput.value.includes('@')) { this.elements.subscriptionAlert.classList.add('visible'); setTimeout(() => { this.elements.subscriptionAlert.classList.remove('visible'); }, 3000); emailInput.value = ''; } else { emailInput.style.borderColor = '#ff6b6b'; setTimeout(() => { emailInput.style.borderColor = 'var(--color-accent)'; }, 2000); } },
            openPreorderModal() { this.elements.preorderModal.form.reset(); this.elements.preorderModal.formContainer.style.display = 'block'; this.elements.preorderModal.confirmationMsg.style.display = 'none'; this.elements.preorderModal.classList.add('visible'); },
            closePreorderModal() { this.elements.preorderModal.classList.remove('visible'); }
        };
        document.addEventListener('DOMContentLoaded', () => {
             setTimeout(() => game.init(), 100);
        });
    </script>
        <script>
        document.addEventListener('DOMContentLoaded', function() {
            // --- Overlay Fade Trigger ---
            const startButton = document.querySelector('#welcome .cta-button');
            const welcomeOverlay = document.querySelector('.welcome-overlay');

            if (startButton && welcomeOverlay) {
    startButton.addEventListener('click', function(e) {
        e.preventDefault();
        welcomeOverlay.classList.add('fade-out');
        // Add this line to make the game container visible
        document.getElementById('integrated-game-container').classList.add('visible');
    });
}
            // --- Card Display Script ---
            const cards = [ { name: 'Black Woodpecker<br><span class="small">(Dryocopus martius)</span>', image: 'images/card-black-woodpecker.png', category_text: 'Birds', category_icon: 'images/birds.png', description: '1. It has a distinctive all-black plumage with a red crown.<br>2. It provides vital shelter for many forest species.<br/>3. You can typically find it in pairs or small family groups.<br/>4. It uses a loud drumming sound to communicate.<br/>5. It prefers mature, old-growth forests.' }, { name: 'European Praying Mantis<br><span class="small">(Mantis religiosa)</span>', image: 'images/card-praying-mantis.png', category_text: 'Insects', category_icon: 'images/insects.png', description: '1. The female lives 6-8 months, while the male lives for 4-6 months.<br/>2. It feeds on insects and honey.<br/>3. These are ambush predators, so they sit and wait for their prey.<br/>4. They mate during the spring and summer months.<br/>5. It has 3 life stages: egg, nymph, and adult.' }, { name: 'Clouded Yellow<br/><span class="small">(Colias croceus)</span>', image: 'images/card-clouded-yellow.png', category_text: 'Butterflies', category_icon: 'images/butterflies.png', description: '1. Its wings have a yellow coloration with black margins.<br/>2. It is known for its strong migratory behavior.<br/>3. It plays a role in the local ecosystem\'s biodiversity.<br/>4. They are strong and fast fliers, and they fly close to the ground.<br/>5. Seeing one is a delight for any butterfly enthusiast.' }, { name: 'Brown Bear <br/><span class="small">(Ursus arctos)</span>', image: 'images/card-bear.png', category_text: 'Animals', category_icon: 'images/animals.png', description: '1. It is the largest land carnivore after the polar bear.<br/>2. Its color can vary from blonde to nearly black.<br/>3. They are apex predators in their habitats.<br/>4. They have complex problem-solving skills.<br/>5. They have a remarkable sense of smell and high intelligence.' }, { name: 'Zander<br/><span class="small">(Sander lucioperca)</span>', image: 'images/card-zander.png', category_text: 'Fish', category_icon: 'images/fish.png', description: '1. This is an apex predator in its ecosystem.<br/>2. It prefers clear waters with a moderate current.<br/>3. You can find it in large rivers, lakes, and reservoirs.<br/>4. It is carnivorous, feeding primarily on smaller fish.<br/>5. It has sharp vision that is adapted to low-light conditions.' }, { name: 'Romanian Peony<br/><span class="small">(Paeonia peregrina)</span>', image: 'images/card-romanian-peony.png', category_text: 'Flowers', category_icon: 'images/flowers.png', description: '1. This is the national flower of Romania.<br/>2. It symbolizes beauty and resilience.<br/>3. It blooms in vibrant pink and white colors.<br/>4. It is important in traditional Romanian culture.<br/>5. You can see it bloom in late spring to early summer.' } ];
            const cardSearch = document.getElementById('cardSearch');
            if (cardSearch) { cardSearch.addEventListener('input', function(e) { const searchTerm = e.target.value.toLowerCase(); const filteredCards = cards.filter(card => card.name.toLowerCase().includes(searchTerm) || card.category_text.toLowerCase().includes(searchTerm) || card.description.toLowerCase().includes(searchTerm)); displayCards(filteredCards); }); }
            function displayCards(cardsToShow) {
                 const cardsGrid = document.getElementById('cardsGrid');
                 if (cardsGrid) {
                     cardsGrid.innerHTML = cardsToShow.map(card => `
                        <div class="card">
                            <h3 class="tcenter">${card.name}</h3>
                            <img class="product-img-card" src="${card.image}">
                            <p class="category">
                                <span><img class="card-category" src="${card.category_icon}" alt="${card.category_text}"> ${card.category_text}</span>
                                <img class="card-img" src="images/logo-little-sprout.png" alt="Logo Little Sprout">
                            </p>
                            <p>${card.description}</p>
                        </div>`).join('');
                 }
             }
            displayCards(cards);
            // --- Nav and Scroll Logic ---
            const sections = document.querySelectorAll('section');
            const navLinks = document.querySelectorAll('nav a');
            const observer = new IntersectionObserver((entries) => { entries.forEach(entry => { if (entry.isIntersecting) { navLinks.forEach(link => link.classList.remove('active')); const activeLink = document.querySelector(`nav a[href="#${entry.target.id}"]`); if (activeLink) { activeLink.classList.add('active'); } } }); }, { root: null, rootMargin: '-50% 0px', threshold: 0 });
            sections.forEach(section => { if (section) { observer.observe(section); } });
            navLinks.forEach(anchor => { anchor.addEventListener('click', function(e) { e.preventDefault(); const targetId = this.getAttribute('href'); const targetSection = document.querySelector(targetId); if (targetSection) { navLinks.forEach(link => link.classList.remove('active')); this.classList.add('active'); targetSection.scrollIntoView({ behavior: 'smooth' }); } }); });
            // --- Language Switcher Logic ---
            const enLink = document.getElementById('en-link');
             const roLink = document.getElementById('ro-link');
             const currentPath = window.location.pathname;
             const currentFile = currentPath.split('/').pop() || 'index.html';
            if (currentFile === 'index.html' || currentFile === '') { roLink.classList.add('active2'); enLink.classList.remove('active2'); } else if (currentFile === 'en.html') { enLink.classList.add('active2'); roLink.classList.remove('active2'); }
            enLink.href = 'en.html';
             roLink.href = 'index.html';
        });
    </script></body>
</html>